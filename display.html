<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Ø´Ø§Ø´Ø© Ø§Ù„Ø¹Ø±Ø¶</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap');
        body { font-family: 'Cairo', sans-serif; overflow: hidden; background: linear-gradient(135deg,#eff6ff,#e9d5ff); }
        
        @keyframes slideDown {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .notification-bar {
            animation: slideDown 0.5s ease-out;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .blink {
            animation: blink 1s ease-in-out infinite;
        }
        
        .clinic-card {
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }
        
        .clinic-card.active {
            border-color: #2563eb;
        }
        
        .clinic-card.paused {
            opacity: 0.5;
        }

        /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ø±ØªÙØ§Ø¹ Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± */
        .news-ticker-container {
            padding-top: 1.25rem;
            padding-bottom: 1.25rem;
        }

        /* Doctor Slider Card - Modern Design */
        .doctor-card-container {
            position: fixed;
            bottom: 90px; /* ÙÙˆÙ‚ Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ù…Ø¨Ø§Ø´Ø±Ø© */
            left: 30px; /* Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± Ù„Ø¹Ø¯Ù… ØªØºØ·ÙŠØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ */
            z-index: 40;
            perspective: 1000px;
        }

        .doctor-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-left: 5px solid #0d9488; /* Ù„ÙˆÙ† Ù…Ù…ÙŠØ² */
            border-radius: 12px;
            padding: 15px;
            width: 320px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            gap: 15px;
            
            /* Animation States */
            opacity: 0;
            transform: translateX(-100%) scale(0.9);
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .doctor-card.active {
            opacity: 1;
            transform: translateX(0) scale(1);
        }

        .doctor-img-wrapper {
            position: relative;
            width: 70px;
            height: 70px;
        }

        .doctor-img {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #f3f4f6;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .doctor-info h4 {
            color: #1f2937;
            font-weight: 800;
            font-size: 1.1rem;
            margin-bottom: 2px;
            line-height: 1.2;
        }

        .doctor-info p {
            color: #4b5563;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .doctor-badge {
            position: absolute;
            bottom: -5px;
            right: -5px;
            background-color: #0d9488;
            color: white;
            font-size: 0.6rem;
            padding: 2px 6px;
            border-radius: 10px;
            border: 2px solid white;
        }

        /* Ù…Ù†Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± */
        html, body { height: 100%; }
        
        /* Ø¹Ù†ØµØ± Ø±Ø¦ÙŠØ³ÙŠ Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø§Ù„Ø²ÙˆÙ… */
        .main-content-wrapper {
            transform-origin: top right;
            transition: transform 0.3s ease;
        }
        
        /* Urgent Call Styles */
        .urgent-call {
            animation: urgent-pulse 1s infinite;
            border: 3px solid #dc2626 !important;
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%) !important;
        }

        @keyframes urgent-pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7); }
            50% { box-shadow: 0 0 0 10px rgba(220, 38, 38, 0); }
        }

        .urgent-badge {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #dc2626;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            animation: badge-pulse 1s infinite;
        }

        @keyframes badge-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
    </style>
</head>
<body class="h-screen flex flex-col">

    <div class="bg-gradient-to-r from-blue-900 to-indigo-900 text-white px-6 py-3 flex items-center justify-between shadow-lg">
        <div class="flex items-center gap-4">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
            </svg>
            <h1 id="centerName" class="text-2xl font-bold">Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø·Ø¨ÙŠ</h1>
        </div>
        <div class="flex items-center gap-4 text-right">
            <div id="currentTime" class="text-3xl font-bold"></div>
            <div class="text-sm">
                <div id="currentDate" class="font-semibold"></div>
            </div>
        </div>
        <button onclick="toggleSettingsMenu()" class="bg-white bg-opacity-20 hover:bg-opacity-30 p-2 rounded-lg transition-all">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
        </button>
    </div>

    <div id="settingsMenu" class="hidden fixed top-16 left-6 bg-white rounded-lg shadow-2xl p-6 z-50 w-80">
        <h3 class="text-xl font-bold text-gray-800 mb-4">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø±Ø¶</h3>
        
        <div class="space-y-4">
            <div>
                <label class="block text-gray-700 font-bold mb-2">Ø±Ù‚Ù… Ø§Ù„Ø´Ø§Ø´Ø©:</label>
                <select id="screenSelectMenu" class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                    <option value="1">Ø§Ù„Ø´Ø§Ø´Ø© 1</option>
                    <option value="2">Ø§Ù„Ø´Ø§Ø´Ø© 2</option>
                    <option value="3">Ø§Ù„Ø´Ø§Ø´Ø© 3</option>
                    <option value="4">Ø§Ù„Ø´Ø§Ø´Ø© 4</option>
                </select>
            </div>

            <div>
                <label class="block text-gray-700 font-bold mb-2">Ø§Ù„ØªÙƒØ¨ÙŠØ±/Ø§Ù„ØªØµØºÙŠØ±:</label>
                <div class="flex gap-2">
                    <button onclick="zoomIn()" class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-bold">
                        ğŸ”+ ØªÙƒØ¨ÙŠØ±
                    </button>
                    <button onclick="zoomOut()" class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-bold">
                        ğŸ”- ØªØµØºÙŠØ±
                    </button>
                </div>
                <button onclick="resetZoom()" class="w-full mt-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 font-bold">
                    Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
                </button>
                <p class="text-sm text-gray-600 mt-2 text-center">Ø§Ù„Ù…Ø³ØªÙˆÙ‰: <span id="zoomLevel">100%</span></p>
            </div>

            <div>
                <label class="block text-gray-700 font-bold mb-2">ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©:</label>
                <button onclick="toggleFullscreen()" id="fullscreenBtnMenu" class="w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 font-bold">
                    ğŸ“º ØªÙØ¹ÙŠÙ„ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©
                </button>
            </div>

            <button onclick="toggleSettingsMenu()" class="w-full bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 font-bold">
                Ø¥ØºÙ„Ø§Ù‚
            </button>
        </div>
    </div>

    <div id="notificationBar" class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50">
        <div class="notification-bar bg-gradient-to-r from-green-500 to-emerald-600 text-white px-12 py-8 shadow-2xl rounded-xl max-w-4xl w-full mx-8">
            <div class="flex flex-col items-center gap-6">
                <svg class="w-20 h-20 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                </svg>
                <div class="text-center">
                    <p id="notificationText" class="text-4xl font-bold mb-3"></p>
                    <p id="notificationTime" class="text-2xl font-bold"></p>
                </div>
            </div>
        </div>
    </div>

    <div class="doctor-card-container">
        <div id="doctorSliderCard" class="doctor-card">
            <div class="doctor-img-wrapper">
                <img id="sliderDocImage" src="" class="doctor-img" alt="Doctor">
                <div class="doctor-badge">Ù…ØªØ§Ø­ Ø§Ù„Ø¢Ù†</div>
            </div>
            <div class="doctor-info">
                <h4 id="sliderDocName">--</h4>
                <p id="sliderDocSpecialty">--</p>
            </div>
        </div>
    </div>

    <div class="main-content-wrapper flex-1 flex overflow-hidden">
        <div class="w-1/4 p-4 overflow-hidden flex flex-col">
            <div id="clinicsContainer" class="flex-1 space-y-3 overflow-hidden"></div>
            
            <div class="bg-white rounded-xl shadow-lg p-3 mt-4 text-center">
                <p class="text-gray-800 font-bold text-sm mb-2">Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¯ÙˆØ±Ùƒ Ø§Ù…Ø³Ø­ Ø§Ù„ÙƒÙˆØ¯</p>
                <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgxrALR9twI4A0S7dnwbI-z9kTGKHiCvYSoATnRHaSKzqUvZaPdraUerTGAC4qrBtIcagjsZgylNhPHcscdmY-lY5HzKx2GT5TqezqH5uZlLdlM0NpEkUlNxmm9VSb7q5iTFoiw-wL5lsEW9-I8oGiPPZGWyPYqp5ElCIP4plZji93qzfl52xM_MPQmCCdq/s320/ALMATAR%20%281%29.png"
                     alt="QR Code" class="w-20 h-20 mx-auto rounded-lg object-cover">
            </div>
        </div>

        <div class="flex-1 p-4">
            <div class="bg-black rounded-xl shadow-xl h-full overflow-hidden relative">
                <video id="videoPlayer" class="w-full h-full object-contain" autoplay loop muted playsinline></video>
                <div class="absolute bottom-4 left-4 right-4 flex items-center gap-2 bg-black bg-opacity-50 rounded-lg p-2">
                    <button onclick="togglePlayPause()" class="text-white p-2 hover:bg-white hover:bg-opacity-20 rounded">
                        <svg id="playIcon" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"></path>
                        </svg>
                        <svg id="pauseIcon" class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h2a2 2 0 012 2v12a2 2 0 01-2 2H7a2 2 0 01-2-2V4zm8 0a2 2 0 012-2h2a2 2 0 012 2v12a2 2 0 01-2 2h-2a2 2 0 01-2-2V4z"></path>
                        </svg>
                    </button>
                    <button onclick="toggleMute()" class="text-white p-2 hover:bg-white hover:bg-opacity-20 rounded">
                        <svg id="muteIcon" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                        <svg id="unmuteIcon" class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"></path>
                        </svg>
                    </button>
                    <input type="range" id="volumeSlider" min="0" max="100" value="50" class="flex-1 mx-2" onchange="changeVolume(this.value)">
                    <span class="text-white text-sm" id="volumeDisplay">50%</span>
                </div>
            </div>
        </div>
    </div>

    <div class="bg-gradient-to-r from-yellow-500 to-orange-500 text-white overflow-hidden relative news-ticker-container">
        <div id="newsTickerContainer" class="absolute whitespace-nowrap">
            <span id="newsTicker" class="text-2xl font-bold px-8 inline-block">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø·Ø¨ÙŠ - Ù†ØªÙ…Ù†Ù‰ Ù„ÙƒÙ… Ø§Ù„Ø´ÙØ§Ø¡ Ø§Ù„Ø¹Ø§Ø¬Ù„</span>
        </div>
    </div>

    <script>
        const firebaseConfig = {
          apiKey: "AIzaSyArFKjBYsFhsPyJPJpjLhH2eSEHlUFEzhI",
          authDomain: "queue-717d5.firebaseapp.com",
          databaseURL: "https://queue-717d5-default-rtdb.firebaseio.com",
          projectId: "queue-717d5",
          storageBucket: "queue-717d5.firebasestorage.app",
          messagingSenderId: "837806460328",
          appId: "1:837806460328:web:f2070b93a2784b1b25619d",
          measurementId: "G-GM30LE46F6"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const firestore = firebase.firestore();

        // Variables
        let currentScreen = 1;
        let audioPath = 'audio/';
        let videoPath = 'media/';
        let speechRate = 1;
        let alertDuration = 5;
        let videos = [];
        let currentVideoIndex = 0;
        let audioCache = {};
        let newsTickerInterval;
        
        // Slider Variables
        let doctorsList = [];
        let currentDocIndex = 0;
        let doctorSliderInterval;

        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        window.onload = function() {
            updateDateTime();
            setInterval(updateDateTime, 1000);

            loadSettings();
            loadClinics();
            listenForCalls();
            listenForAlerts();
            loadVideos();
            
            // Initialize new doctor slider
            initDoctorSlider();

            document.getElementById('screenSelectMenu').addEventListener('change', (e) => {
                currentScreen = parseInt(e.target.value);
                loadClinics();
            });

            updatePlayPauseIcons();
            updateMuteIcons();
        };

        function updateDateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            const dateStr = now.toLocaleDateString('ar-EG', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            
            document.getElementById('currentTime').textContent = timeStr;
            document.getElementById('currentDate').textContent = dateStr;
        }

        function loadSettings() {
            db.ref('settings').on('value', (snapshot) => {
                const settings = snapshot.val() || {};
                document.getElementById('centerName').textContent = settings.centerName || 'Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø·Ø¨ÙŠ';
                
                const ticker = document.getElementById('newsTicker');
                ticker.textContent = settings.newsContent || 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø·Ø¨ÙŠ';
                
                const speed = settings.newsSpeed || 50;
                startNewsTicker(speed);
                
                audioPath = settings.audioPath || 'audio/';
                videoPath = settings.videoPath || 'media/';
                speechRate = settings.speechRate || 1;
                alertDuration = settings.alertDuration || 5;
                
                preloadAudio();
            });
        }

        function startNewsTicker(speed) {
            if (newsTickerInterval) clearInterval(newsTickerInterval);
            
            const container = document.getElementById('newsTickerContainer');
            const ticker = document.getElementById('newsTicker');
            const parent = container.parentElement;
            const containerWidth = parent.offsetWidth;
            const tickerWidth = ticker.offsetWidth;
            
            let position = containerWidth;
            container.style.transform = `translateX(${position}px) translateY(-50%)`;
            container.style.top = '50%';
            
            const pixelsPerSecond = speed;
            const interval = 20;
            const pixelsPerInterval = (pixelsPerSecond / 1000) * interval;
            
            newsTickerInterval = setInterval(() => {
                position -= pixelsPerInterval;
                
                if (position < -tickerWidth) {
                    position = containerWidth;
                }
                
                container.style.transform = `translateX(${position}px) translateY(-50%)`;
            }, interval);
        }

        // New Doctor Slider Logic
        async function initDoctorSlider() {
            try {
                // Fetch active doctors only
                const snapshot = await firestore.collection('doctors')
                    .where('workStatus', '==', 'Ù†Ø´Ø·')
                    .get();

                if (!snapshot.empty) {
                    doctorsList = snapshot.docs.map(doc => doc.data());
                    
                    // Show first immediately
                    showNextDoctor();
                    
                    // Repeat every 15 seconds
                    doctorSliderInterval = setInterval(showNextDoctor, 15000);
                }
            } catch (error) {
                console.error("Error fetching doctors for slider:", error);
            }
        }

function showNextDoctor() {
    if (doctorsList.length === 0) return;

    const card = document.getElementById('doctorSliderCard');
    const imgEl = document.getElementById('sliderDocImage');
    const nameEl = document.getElementById('sliderDocName');
    const specEl = document.getElementById('sliderDocSpecialty');

    // 1. Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (Slide Out)
    card.classList.remove('active');

    // 2. Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ù†Ù…ÙŠØ´Ù† Ø«Ù… ØªØºÙŠÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¥Ø¸Ù‡Ø§Ø±Ù‡Ø§
    setTimeout(() => {
        const doctor = doctorsList[currentDocIndex];

        // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        nameEl.textContent = doctor.name;
        specEl.textContent = doctor.specialty || 'Ø·Ø¨ÙŠØ¨ Ù…ØªØ®ØµØµ';
        
        // Ø§Ù„ØªØµØ­ÙŠØ­ Ù‡Ù†Ø§: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† imageUrl Ø£ÙˆÙ„Ø§Ù‹ØŒ Ø«Ù… image ÙƒØ§Ø­ØªÙŠØ§Ø·ÙŠ
        const imageSrc = doctor.imageUrl || doctor.image;

        // ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØµÙˆØ±Ø© (Ø£Ùˆ ØµÙˆØ±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù…Ù„ÙˆÙ†Ø©)
        if (imageSrc && imageSrc.trim() !== '') {
            imgEl.src = imageSrc;
        } else {
            // ØµÙˆØ±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø£ÙˆÙ„Ù‰
            imgEl.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(doctor.name)}&background=0d9488&color=fff&size=128&font-size=0.4`;
        }

        // 3. Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (Slide In)
        card.classList.add('active');

        // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù…Ø¤Ø´Ø± Ù„Ù„Ø·Ø¨ÙŠØ¨ Ø§Ù„ØªØ§Ù„ÙŠ
        currentDocIndex = (currentDocIndex + 1) % doctorsList.length;

    }, 1000); // Ø§Ù†ØªØ¸Ø§Ø± Ø«Ø§Ù†ÙŠØ© ÙˆØ§Ø­Ø¯Ø© ÙˆÙ‡ÙŠ Ù…Ø¯Ø© Ø§Ù„Ø§Ù†Ù…ÙŠØ´Ù† Ù„Ù„Ø®Ø±ÙˆØ¬
}

        function loadClinics() {
            db.ref('clinics').on('value', (snapshot) => {
                const clinics = snapshot.val() || {};
                const container = document.getElementById('clinicsContainer');
                container.innerHTML = '';
                
                Object.keys(clinics).forEach(id => {
                    const clinic = clinics[id];
                    const screens = Array.isArray(clinic.screens) ? clinic.screens : [clinic.screen];
                    if (screens.includes(currentScreen)) {
                        const card = createClinicCard(id, clinic);
                        container.appendChild(card);
                    }
                });
            });
        }

        function createClinicCard(id, clinic) {
            const div = document.createElement('div');
            div.id = 'clinic-' + id;
            const baseClass = 'clinic-card bg-white rounded-xl shadow-lg p-4 border-r-4';
            const statusClass = clinic.status === 'active' ? '' : 'paused';
            div.className = `${baseClass} border-blue-600 ${statusClass}`;
            
            const statusColor = clinic.status === 'active' ? 'text-green-600' : 'text-red-600';
            const statusText = clinic.status === 'active' ? 'Ù†Ø´Ø·' : 'Ù…ØªÙˆÙ‚Ù';
            
            const lastCallTime = clinic.lastCall ? new Date(clinic.lastCall).toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit' }) : '--:--';
            
            div.innerHTML = `
                <div class="flex items-center justify-between mb-2">
                    <h3 class="text-2xl font-bold text-gray-800">${clinic.name}</h3>
                    <span class="text-5xl font-black text-blue-600">${clinic.currentNumber || 0}</span>
                </div>
                <div class="flex items-center justify-between text-sm text-gray-600">
                    <div class="flex items-center gap-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span>Ø¢Ø®Ø± Ù†Ø¯Ø§Ø¡: ${lastCallTime}</span>
                    </div>
                    <span class="${statusColor} font-bold">${statusText}</span>
                </div>
            `;
            
            return div;
        }

        function listenForCalls() {
            db.ref('calls').orderByChild('timestamp').limitToLast(1).on('child_added', (snapshot) => {
                const call = snapshot.val();
                if (!call) return;
                if (call.timestamp > Date.now() - 5000) {
                    db.ref('clinics/' + call.clinicId).once('value', (clinicSnapshot) => {
                        const clinic = clinicSnapshot.val();
                        if (clinic) {
                            const screens = Array.isArray(clinic.screens) ? clinic.screens : [clinic.screen];
                            if (screens.includes(currentScreen)) {
                                handleCall(call);
                            }
                        }
                    });
                }
            });
        }

        function listenForAlerts() {
            db.ref('alerts').orderByChild('timestamp').limitToLast(1).on('child_added', (snapshot) => {
                const alert = snapshot.val();
                if (!alert) return;
                if (alert.timestamp > Date.now() - 5000) {
                    showNotification(alert.message, new Date(alert.timestamp).toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit' }));
                }
            });
        }

        async function handleCall(call) {
            const clinicCard = document.getElementById('clinic-' + call.clinicId);
            if (clinicCard) {
                // Add urgent class if it's urgent
                if (call.isUrgent) {
                    clinicCard.classList.add('urgent-call');
                    
                    // Add urgent badge
                    if (!clinicCard.querySelector('.urgent-badge')) {
                        const badge = document.createElement('div');
                        badge.className = 'urgent-badge';
                        badge.textContent = 'âš ï¸ Ø·Ø§Ø±Ø¦';
                        clinicCard.style.position = 'relative';
                        clinicCard.appendChild(badge);
                    }
                    
                    // Remove after 10 seconds
                    setTimeout(() => {
                        clinicCard.classList.remove('urgent-call');
                        const badge = clinicCard.querySelector('.urgent-badge');
                        if (badge) badge.remove();
                    }, 10000);
                } else {
                    clinicCard.classList.add('active', 'blink', 'bg-blue-50');
                    setTimeout(() => {
                        clinicCard.classList.remove('blink');
                        setTimeout(() => {
                            clinicCard.classList.remove('active', 'bg-blue-50');
                        }, 3000);
                    }, 3000);
                }
            }
            
            // Show notification
            let message = `Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø±Ù‚Ù… ${call.number} Ø§Ù„ØªÙˆØ¬Ù‡ Ø¥Ù„Ù‰ ${call.clinicName}`;
            if (call.isUrgent) {
                message = `âš ï¸ Ø­Ø§Ù„Ø© Ø·Ø§Ø±Ø¦Ø© - ${message}`;
            }
            
            const time = new Date(call.timestamp).toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit' });
            showNotification(message, time);
            
            await playCallAudio(call.number, call.clinicName);
        }

        function showNotification(text, time) {
            const bar = document.getElementById('notificationBar');
            document.getElementById('notificationText').textContent = text;
            document.getElementById('notificationTime').textContent = time;
            
            bar.classList.remove('hidden');
            
            setTimeout(() => {
                bar.classList.add('hidden');
            }, alertDuration * 1000);
        }

        async function playCallAudio(number, clinicName) {
            try {
                await playAudioWithRate(audioPath + 'ding.mp3', 1);
                
                try {
                    await playAudioWithRate(audioPath + number + '.mp3', speechRate);
                } catch(e) {
                    speakText(number);
                }

                const clinicsSnap = await db.ref('clinics').once('value');
                const clinics = clinicsSnap.val() || {};
                const clinic = Object.values(clinics).find(c => c.name === clinicName);
                if (clinic) {
                    try {
                        await playAudioWithRate(audioPath + 'clinic' + clinic.number + '.mp3', speechRate);
                    } catch(e) {
                        speakText(`Ø§Ù„ØªÙˆØ¬Ù‡ Ø¥Ù„Ù‰ ${clinicName}`);
                    }
                } else {
                    speakText(`Ø§Ù„ØªÙˆØ¬Ù‡ Ø¥Ù„Ù‰ ${clinicName}`);
                }
            } catch (err) {
                console.log('Audio play error, fallback to TTS', err);
                speakText(`Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø±Ù‚Ù… ${number} Ø§Ù„ØªÙˆØ¬Ù‡ Ø¥Ù„Ù‰ ${clinicName}`);
            }
        }

        async function playAudioWithRate(url, rate) {
            return new Promise(async (resolve, reject) => {
                try {
                    const response = await fetch(url);
                    if (!response.ok) throw new Error('not-found');
                    const arrayBuffer = await response.arrayBuffer();
                    const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);
                    const source = audioContext.createBufferSource();
                    source.buffer = audioBuffer;
                    source.playbackRate.value = rate;
                    source.connect(audioContext.destination);

                    source.onended = () => resolve();
                    source.start(0);
                } catch (error) {
                    reject(error);
                }
            });
        }

        function speakText(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ar-SA';
                utterance.rate = speechRate;
                speechSynthesis.speak(utterance);
            }
        }

        function loadVideos() {
            db.ref('settings').once('value', (snapshot) => {
                const settings = snapshot.val() || {};
                const useLocal = settings.useLocalVideos || false;
                const localPath = settings.localVideoPath || '/sdcard/Videos/';
                const videoList = settings.videoList || ['video1.mp4', 'video2.mp4', 'video3.mp4'];
                
                videos = videoList.map(v => {
                    if (useLocal) {
                        return localPath + v;
                    } else {
                        return videoPath + v;
                    }
                });
                
                const video = document.getElementById('videoPlayer');
                
                if (videos.length > 0) {
                    video.src = videos[0];
                    video.volume = 0.5;
                    
                    video.addEventListener('ended', () => {
                        currentVideoIndex = (currentVideoIndex + 1) % videos.length;
                        video.src = videos[currentVideoIndex];
                        video.play().catch(err => console.log('video play error', err));
                    });
                    
                    video.addEventListener('error', () => {
                        console.log('Error loading video:', videos[currentVideoIndex]);
                        currentVideoIndex = (currentVideoIndex + 1) % videos.length;
                        if (currentVideoIndex < videos.length) {
                            video.src = videos[currentVideoIndex];
                            video.play().catch(err => console.log('video play error', err));
                        }
                    });
                    
                    video.play().catch(err => console.log('Autoplay prevented:', err));
                }
            });
        }

        function togglePlayPause() {
            const video = document.getElementById('videoPlayer');
            if (video.paused) {
                video.play().catch(() => {});
            } else {
                video.pause();
            }
            updatePlayPauseIcons();
        }

        function updatePlayPauseIcons() {
            const video = document.getElementById('videoPlayer');
            const playIcon = document.getElementById('playIcon');
            const pauseIcon = document.getElementById('pauseIcon');

            if (video.paused) {
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
            } else {
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
            }
        }

        function toggleMute() {
            const video = document.getElementById('videoPlayer');
            video.muted = !video.muted;
            updateMuteIcons();
        }

        function updateMuteIcons() {
            const video = document.getElementById('videoPlayer');
            const muteIcon = document.getElementById('muteIcon');
            const unmuteIcon = document.getElementById('unmuteIcon');
            if (video.muted || video.volume === 0) {
                muteIcon.classList.remove('hidden');
                unmuteIcon.classList.add('hidden');
            } else {
                muteIcon.classList.add('hidden');
                unmuteIcon.classList.remove('hidden');
            }
        }

        function changeVolume(val) {
            const video = document.getElementById('videoPlayer');
            video.volume = val / 100;
            video.muted = false;
            document.getElementById('volumeDisplay').textContent = val + '%';
            updateMuteIcons();
        }

        function preloadAudio() {
            const commonFiles = ['ding.mp3'];
            for (let i = 1; i <= 100; i++) commonFiles.push(i + '.mp3');
            for (let i = 1; i <= 20; i++) commonFiles.push('clinic' + i + '.mp3');

            commonFiles.forEach(file => {
                const audio = new Audio(audioPath + file);
                audio.preload = 'auto';
                audioCache[file] = audio;
            });
        }

        function toggleSettingsMenu() {
            const menu = document.getElementById('settingsMenu');
            menu.classList.toggle('hidden');
        }

        function toggleFullscreen() {
            const elem = document.documentElement;
            const btn = document.getElementById('fullscreenBtnMenu');

            if (!document.fullscreenElement) {
                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.webkitRequestFullscreen) {
                    elem.webkitRequestFullscreen();
                }
                if (btn) btn.textContent = "ğŸ“º Ø¥ÙŠÙ‚Ø§Ù Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©";
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                }
                if (btn) btn.textContent = "ğŸ“º ØªÙØ¹ÙŠÙ„ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©";
            }
        }

        let zoomLevel = 1;
        const minZoom = 0.5;
        const maxZoom = 2.5;

        function zoomIn() {
            zoomLevel = Math.min(maxZoom, +(zoomLevel + 0.04).toFixed(2));
            applyZoom();
        }

        function zoomOut() {
            zoomLevel = Math.max(minZoom, +(zoomLevel - 0.04).toFixed(2));
            applyZoom();
        }

        function resetZoom() {
            zoomLevel = 1;
            applyZoom();
        }

        function applyZoom() {
            const mainWrapper = document.querySelector('.main-content-wrapper');
            if (mainWrapper) {
                mainWrapper.style.transform = `scale(${zoomLevel})`;
                mainWrapper.style.transformOrigin = 'top right';
            }
            document.getElementById('zoomLevel').textContent = Math.round(zoomLevel * 100) + '%';
        }

        document.getElementById('videoPlayer')?.addEventListener?.('play', updatePlayPauseIcons);
        document.getElementById('videoPlayer')?.addEventListener?.('pause', updatePlayPauseIcons);
        document.getElementById('videoPlayer')?.addEventListener?.('volumechange', updateMuteIcons);

        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'visible' && audioContext.state === 'suspended') {
                audioContext.resume().catch(()=>{});
            }
        });

        window.addEventListener('beforeunload', () => {
            if (doctorSliderInterval) clearInterval(doctorSliderInterval);
            if (newsTickerInterval) clearInterval(newsTickerInterval);
        });


// Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
function listenForVideoControls() {
    const video = document.getElementById('videoPlayer');
    
    db.ref('videoControl').limitToLast(1).on('child_added', (snapshot) => {
        const data = snapshot.val();
        // Ø§Ù„ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ø£Ù…Ø± Ø¬Ø¯ÙŠØ¯ (Ù„Ù… ÙŠÙ…Ø± Ø¹Ù„ÙŠÙ‡ Ø£ÙƒØ«Ø± Ù…Ù† 5 Ø«ÙˆØ§Ù†ÙŠ) Ù„ØªØ¬Ù†Ø¨ ØªÙ†ÙÙŠØ° Ø£ÙˆØ§Ù…Ø± Ù‚Ø¯ÙŠÙ…Ø© Ø¹Ù†Ø¯ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©
        if (Date.now() - data.timestamp < 5000) {
            
            switch(data.action) {
                case 'play':
                    video.play();
                    break;
                case 'pause':
                    video.pause();
                    break;
                case 'stop': // Ù†Ø¹ØªØ¨Ø±Ù‡Ø§ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª
                    video.pause();
                    video.currentTime = 0;
                    break;
                case 'mute':
                    video.muted = !video.muted;
                    updateMuteIcons(); // Ø¯Ø§Ù„Ø© Ù…ÙˆØ¬ÙˆØ¯Ø© Ù„Ø¯ÙŠÙƒ ÙÙŠ display.html
                    break;
                case 'next':
                    currentVideoIndex = (currentVideoIndex + 1) % videos.length;
                    video.src = videos[currentVideoIndex];
                    video.play();
                    break;
                case 'previous':
                    currentVideoIndex = (currentVideoIndex - 1 + videos.length) % videos.length;
                    video.src = videos[currentVideoIndex];
                    video.play();
                    break;
                case 'volume':
                    if(data.value) {
                        video.volume = data.value / 100;
                        video.muted = false; // Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙƒØªÙ… Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØª
                    }
                    break;
            }
        }
    });
}

function loadStatistics() {
    const todayStart = new Date();
    todayStart.setHours(0, 0, 0, 0);
    const timestampStart = todayStart.getTime();

    // Ø¬Ù„Ø¨ Ø§Ù„Ù†Ø¯Ø§Ø¡Ø§Øª Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Realtime Database)
    db.ref('calls').orderByChild('timestamp').startAt(timestampStart).once('value', (snapshot) => {
        const calls = snapshot.val() || {};
        const callsArray = Object.values(calls);
        
        // 1. Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ø¯Ø§Ø¡Ø§Øª
        document.getElementById('totalCalls').innerText = callsArray.length;

        // 2. Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© ÙˆØ£ÙƒØ«Ø± Ø¹ÙŠØ§Ø¯Ø© Ù†Ø´Ø§Ø·Ø§Ù‹
        const clinicCounts = {};
        callsArray.forEach(call => {
            clinicCounts[call.clinicName] = (clinicCounts[call.clinicName] || 0) + 1;
        });

        const activeClinicsCount = Object.keys(clinicCounts).length;
        document.getElementById('activeClinics').innerText = activeClinicsCount;

        // Ø¥ÙŠØ¬Ø§Ø¯ Ø£ÙƒØ«Ø± Ø¹ÙŠØ§Ø¯Ø© Ù†Ø´Ø§Ø·Ø§Ù‹
        let maxCalls = 0;
        let topClinic = '--';
        for (const [name, count] of Object.entries(clinicCounts)) {
            if (count > maxCalls) {
                maxCalls = count;
                topClinic = name;
            }
        }
        document.getElementById('mostActiveClinic').innerText = topClinic;

        // 3. Ø­Ø³Ø§Ø¨ Ù…ØªÙˆØ³Ø· Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± (ØªÙ‚Ø¯ÙŠØ±ÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ÙˆÙ‚Øª Ø§Ù„Ù†Ø¯Ø§Ø¡Ø§Øª)
        // Ù…Ù„Ø§Ø­Ø¸Ø©: Ù„Ø­Ø³Ø§Ø¨ Ø¯Ù‚ÙŠÙ‚ Ù†Ø­ØªØ§Ø¬ ÙˆÙ‚Øª Ø§Ù„Ø­Ø¬Ø² ÙˆÙˆÙ‚Øª Ø§Ù„Ù†Ø¯Ø§Ø¡ØŒ Ù‡Ù†Ø§ Ø³Ù†Ø­Ø³Ø¨ Ø§Ù„ÙØ§Ø±Ù‚ Ø§Ù„Ø²Ù…Ù†ÙŠ Ø¨ÙŠÙ† Ø§Ù„Ù†Ø¯Ø§Ø¡Ø§Øª Ù„Ù†ÙØ³ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©
        let totalWaitTime = 0;
        let intervalsCount = 0;
        
        // ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù†Ø¯Ø§Ø¡Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø© ÙˆØªØ±ØªÙŠØ¨Ù‡Ø§
        const callsByClinic = {};
        callsArray.forEach(call => {
            if (!callsByClinic[call.clinicId]) callsByClinic[call.clinicId] = [];
            callsByClinic[call.clinicId].push(call.timestamp);
        });

        for (const clinicId in callsByClinic) {
            const times = callsByClinic[clinicId].sort((a, b) => a - b);
            for (let i = 1; i < times.length; i++) {
                const diffMinutes = (times[i] - times[i-1]) / 1000 / 60;
                // Ø§Ø³ØªØ¨Ø¹Ø§Ø¯ Ø§Ù„ÙØªØ±Ø§Øª Ø§Ù„Ø·ÙˆÙŠÙ„Ø© Ø¬Ø¯Ø§Ù‹ (Ø£ÙƒØ«Ø± Ù…Ù† 30 Ø¯Ù‚ÙŠÙ‚Ø© ØªØ¹Ù†ÙŠ ØªÙˆÙ‚Ù Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©)
                if (diffMinutes < 30) {
                    totalWaitTime += diffMinutes;
                    intervalsCount++;
                }
            }
        }

        const avgTime = intervalsCount > 0 ? Math.round(totalWaitTime / intervalsCount) : 0;
        document.getElementById('avgWaitTime').innerText = avgTime;

        // 4. ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª (Ù‚Ø§Ø¦Ù…Ø© ØªÙØµÙŠÙ„ÙŠØ©)
        const detailsDiv = document.getElementById('clinicStatistics');
        detailsDiv.innerHTML = '';
        
        for (const [name, count] of Object.entries(clinicCounts)) {
            detailsDiv.innerHTML += `
                <div class="flex justify-between items-center bg-gray-50 p-3 rounded">
                    <span class="font-bold text-gray-700">${name}</span>
                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-bold">${count} Ù†Ø¯Ø§Ø¡</span>
                </div>
            `;
        }
    });
    
    alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª');
}

// Ø¯Ø§Ù„Ø© Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© (Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ù„ÙØ¹Ù„ Ù„Ø¯ÙŠÙƒ Ù„ÙƒÙ† ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯Ù‡Ø§)
function cleanupOldData(type) {
    if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.')) return;
    
    if (type === 'all' || type === 'calls') {
        db.ref('calls').remove();
    }
    if (type === 'all' || type === 'alerts') {
        db.ref('alerts').remove();
        db.ref('controlAlerts').remove();
        db.ref('doctorAlerts').remove();
    }
    alert('ØªÙ… ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
    loadStatistics(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ù„ØªØµØ¨Ø­ Ø£ØµÙØ§Ø±
}

        
    </script>
</body>
</html>
